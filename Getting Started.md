# Getting Started
Elasticsearch 是一个高度可靠地全文搜索与分析引擎，它提供了存储，搜索，分析，海量数据的快速和实时分析等功能。它通常用于那些有着复杂的搜索需求的应用，为其提供底层的搜索引擎    
下面是一些使用Elasticearch的例子  
- 你运营一家在线网上商店，你希望你的的客户可以搜索您销售的产品，这时您可以使用Elasticsearch来存储你的整个产品的目录和库存，并且给用户提供搜索和搜索补全的功能。  

- 你希望收集日志或交易数据，并且想要进行分析和数据挖掘，例如希望能有查找，统计数据，汇总或异常分析功能，此时，你可以使用Logstash（Elasticsearch / Logstash / Kibana堆栈的一部分）来收集，汇总和分析数据，然后使用Logstash将此数据提供给Elasticsearch。一旦数据存储到了Elasticsearch中，你就可以通过搜索，聚合等各种查询操作来挖掘您感兴趣的任何信息。 

- 你运行一个价格提醒平台，它允许精明的顾客指定一条规则，例如“我有兴趣购买特定的电子产品，并且如果在下个月内，任何供应商的产品价格低于$ X，我都会收到通知” 。在这种情况下，您可以缩减供应商价格，将其推入Elasticsearch，并使用其反向搜索（Percolator）功能将价格变动与客户查询进行匹配，并最终在发现匹配时将警报推送给客户。

- 您需要分析/商业智能需求，并且希望快速调查，分析，可视化并针对大量数据提出临时问题（想想数百万或数十亿条记录）。在这种情况下，您可以使用Elasticsearch存储数据，然后使用Kibana（Elasticsearch / Logstash / Kibana堆栈的一部分）来构建自定义仪表板，以便可视化数据对您很重要的各个方面。另外，您可以使用Elasticsearch聚合功能对数据执行复杂的商业智能查询。

- 在本教程的其余部分中，你将通过获取并运行Elasticsearch，浏览它并执行基本操作（如索引，搜索和修改数据）的过程来指导你。在本教程的最后，你应该对Elasticsearch是什么以及它的工作原理有一个很好的了解，并希望对你有所启发，以了解如何使用它来构建复杂的搜索应用程序或从数据中挖掘有用信息

## 基本概念  
这里是一些Elasticsearch的核心概念，从刚开始就理解这里基本概念将极大的帮助我们简化学习的过程  
**Near Realtime(NRT)**  
Elasticsearch 是一个近实时的搜索平台。这意味着从你创建索引到能搜索，这有一些少量的延迟(正常是1秒)。
**Cluster**  
群集是一个或多个节点（服务器）的集合，它们一起保存整个数据并提供跨所有节点的联合索引和搜索功能，一个集群通过一个唯一的名字来标识，这个名字默认是"elasticsearch"，这个名字很重要，因为一个节点一旦加入到这个名字的集群中，将会成为这个集群的一部分。  
你需要确保在不同的环境中没有使用重复的集群名，否则你可能会加入到错误的集群，例如，您可以使用logging-dev，logging-stage和logging-prod来开发，分段和生产集群 【TODO 翻译】  
但是注意，只有一个节点的集群也是可以的。此外，您还可能拥有多个独立的群集，但是每个群集都有自己的唯一群集名称  
**Node**  
节点是属于集群一部分的单个服务器，存储数据并参与集群的索引和搜索功能。就像一个集群一样，一个节点由一个名称来标识，默认情况下该名称是在启动时分配给节点的随机通用唯一标识符（UUID）。如果您不需要默认值，您可以定义任何您想要的节点名称。此名称对于管理目的非常重要，您需要确定网络中的哪些服务器与Elasticsearch群集中的哪些节点相对应。

可以将节点配置为按集群名称加入特定集群。默认情况下，每个节点都设置为加入一个名为的群集elasticsearch，这意味着如果启动网络中的多个节点并假设它们可以互相发现，它们将自动形成并加入一个名为的群集elasticsearch。

在单个群集中，您可以拥有任意数量的节点。此外，如果网络上当前没有其他Elasticsearch节点正在运行，则默认情况下启动单个节点将形成名为的新单节点群集elasticsearch。  

**index** 
索引是一些具有相似特征的文档集合。例如，您可以拥有客户数据的索引，产品目录的另一个索引以及订单数据的另一个索引。索引由名称（必须全部为小写）标识，并且此名称用于在对其中的文档执行索引，搜索，更新和删除操作时引用索引。

在单个群集中，您可以根据需要定义多个索引。

**Type**  
WARNING: 6.0.0版本开始，移除了Type类型，具体请参考 [移除mapping types类型](https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html)  

**Document**  
一个文档是可以被搜索的信息单元，例如，一个消费者是一个document，一个产品是一个document，一个订单也可以是一个document。document用json来表示，json是一种格式，类似于xml，在互联网广泛应用于数据交换的一种数据格式  
在index/type中，您可以根据需要存储任意数量的document。请注意，尽管document实际上存在于index中，但实际上document必须被indexed/assigned给索引内的类型。    

**Shards & Replicas**  

一个index可能存储大量数据，这些数据可能会超出单个节点的硬件限制。例如，占用1TB磁盘空间的十亿份文档的单个index可能不适合单个节点的磁盘，或者可能太慢而无法单独向单个节点提供搜索请求。

为了解决这个问题，Elasticsearch提供了将索引进行多个切分的能力。当您创建索引时，您可以根据需求定义shard的数量。每个shard本身都是一个功能齐全且独立的“index”，可以存在于集群中的任何节点上。  

Sharding 很重要的原因有以下两点  
- 有利于集群横向扩展  
- shard 可以跨分片分发，这样会提高并行的操作，提高吞吐量和性能  
分片如何分布的机制以及其文档如何聚合回搜索请求完全由Elasticsearch管理，对用户来说透明。  
在任何时候都可能出现故障的网络/云环境中，非常有用并且强烈建议有一个故障切换机制，以防碎片/节点以某种方式脱机或因任何原因而消失。为此，Elasticsearch允许您将索引碎片的一个或多个副本制作为简称为副本碎片或副本。  

Replication 很重要的原因有以下两点
- 服务器随时可能故障或宕机, Replication可为此提供高可用性。由于这个原因，需要注意的是，replica shard和其Shard永远不可能在同一个节点中。    
- 因为搜索可以在所有副本上并行执行。所以也提高了吞吐量和性能  

**总结**  
每个index都可以被切分成多个shards，一个index也可以有0个或者多个replica shard.   
在创建索引时，可以为每个索引定义shards和replicas的数量。在创建索引之后，您可以随时更改replicas的数量，但却无法在更改shards(pricmary shards)的数量。  
默认情况下，Elasticsearch中的每个索引都分配了5个primary shards和1个replica，这意味着如果群集中至少有两个节点，则索引将包含5个primary shard和另外5个replica shard（每个primary shard），每个索引总共有10个shard。 

**NOTE**：
每个Elasticsearch shard都是一个Lucene index，由于LUCENE-5843的限制，您可以在单个Lucene索引中拥有最大数量的文档的限制为2,147,483,519（= Integer.MAX_VALUE - 128）个文件。您可以使用_cat / shards API监视分片大小。  